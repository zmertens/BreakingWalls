<?xml version="1.0" encoding="UTF-8"?>
<nifty xmlns="http://nifty-gui.lessvoid.com/nifty-gui" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://nifty-gui.lessvoid.com/nifty-gui http://nifty-gui.lessvoid.com/nifty-gui-1.4.xsd">

  <!-- ============================================== -->
  <!-- Main Menu Screen -->
  <!-- ============================================== -->
  <screen id="mainMenu" controller="com.flipsandale.game.MainMenuScreenController">
    <layer id="background" backgroundColor="#000000ff" childLayout="vertical">
      <panel id="title" childLayout="center" alignRight="center" valignCenter="center">
        <text font="Interface/Fonts/Default.fnt" text="BREAKING WALLS" align="center" valignCenter="center" color="#ffffffff" textSize="48"/>
      </panel>
      
      <panel id="menu" childLayout="vertical" padding="50,50,50,50" alignRight="center" valignCenter="center">
        <control name="button" id="btnPlay" label="Play" align="center" valignCenter="center" height="50px" width="200px">
          <interact onClick="startGame()"/>
        </control>
        <panel height="20px" childLayout="vertical"/>
        <control name="button" id="btnSettings" label="Settings" align="center" valignCenter="center" height="50px" width="200px">
          <interact onClick="showSettings()"/>
        </control>
        <panel height="20px" childLayout="vertical"/>
        <control name="button" id="btnQuit" label="Quit" align="center" valignCenter="center" height="50px" width="200px">
          <interact onClick="quitGame()"/>
        </control>
      </panel>
    </layer>
  </screen>

  <!-- ============================================== -->
  <!-- Mode Selection Screen -->
  <!-- ============================================== -->
  <screen id="modeSelection" controller="com.flipsandale.game.ModeSelectScreenController">
    <layer id="background" backgroundColor="#1a1a2eff" childLayout="vertical">
      <panel id="title" childLayout="center" alignRight="center" valignCenter="center">
        <text font="Interface/Fonts/Default.fnt" text="SELECT GAME MODE" align="center" valignCenter="center" color="#ffffffff" textSize="40"/>
      </panel>
      
      <panel id="modes" childLayout="horizontal" padding="50,50,50,50" alignRight="center" valignCenter="center">
        <!-- ZEN Mode -->
        <panel id="zenPanel" childLayout="vertical" padding="30,30,30,30" width="300px" height="300px" backgroundColor="#0066ccff">
          <text font="Interface/Fonts/Default.fnt" text="ZEN MODE" align="center" valignCenter="top" color="#ffffffff" textSize="32"/>
          <text font="Interface/Fonts/Default.fnt" text="First-Person" align="center" valignCenter="center" color="#ffffffff" textSize="18"/>
          <text font="Interface/Fonts/Default.fnt" text="No Penalties" align="center" valignCenter="center" color="#ffffffff" textSize="18"/>
          <text font="Interface/Fonts/Default.fnt" text="Infinite Lives" align="center" valignCenter="center" color="#ffffffff" textSize="18"/>
          <control name="button" id="btnZen" label="SELECT" align="center" valignCenter="bottom" height="40px" width="150px">
            <interact onClick="selectZenMode()"/>
          </control>
        </panel>
        
        <panel width="50px" height="100%"/>
        
        <!-- TIME TRIAL Mode -->
        <panel id="timeTrialPanel" childLayout="vertical" padding="30,30,30,30" width="300px" height="300px" backgroundColor="#cc6600ff">
          <text font="Interface/Fonts/Default.fnt" text="TIME TRIAL" align="center" valignCenter="top" color="#ffffffff" textSize="32"/>
          <text font="Interface/Fonts/Default.fnt" text="Orthogonal View" align="center" valignCenter="center" color="#ffffffff" textSize="18"/>
          <text font="Interface/Fonts/Default.fnt" text="Timer Resets on Fall" align="center" valignCenter="center" color="#ffffffff" textSize="18"/>
          <text font="Interface/Fonts/Default.fnt" text="Score Race" align="center" valignCenter="center" color="#ffffffff" textSize="18"/>
          <control name="button" id="btnTimeTrial" label="SELECT" align="center" valignCenter="bottom" height="40px" width="150px">
            <interact onClick="selectTimeTrialMode()"/>
          </control>
        </panel>
      </panel>

      <panel id="footer" childLayout="center" alignRight="center" valignBottom="bottom" height="60px">
        <control name="button" id="btnBack" label="Back" align="center" height="40px" width="100px">
          <interact onClick="backToMainMenu()"/>
        </control>
      </panel>
    </layer>
  </screen>

  <!-- ============================================== -->
  <!-- Gameplay HUD Screen (Overlay) -->
  <!-- ============================================== -->
  <screen id="gameplayHUD" controller="com.flipsandale.game.GameplayHUDScreenController">
    <layer id="hud" childLayout="absolute" backgroundColor="#00000000">
      <!-- Top-left corner HUD -->
      <panel id="hudPanel" x="10px" y="10px" width="300px" height="200px" childLayout="vertical" backgroundColor="#00000088" padding="10,10,10,10">
        <text id="levelText" font="Interface/Fonts/Default.fnt" text="Level: 1" color="#ffffffff" textSize="18"/>
        <text id="scoreText" font="Interface/Fonts/Default.fnt" text="Score: 0" color="#ffffffff" textSize="18"/>
        <text id="timeText" font="Interface/Fonts/Default.fnt" text="Time: 0.0s" color="#ffffffff" textSize="18"/>
        <text id="platformsText" font="Interface/Fonts/Default.fnt" text="Platforms: 0" color="#ffffffff" textSize="18"/>
        <text id="fallsText" font="Interface/Fonts/Default.fnt" text="Falls: 0" color="#ffffffff" textSize="18"/>
      </panel>

      <!-- ESC hint at bottom center -->
      <panel id="escHint" x="0px" y="650px" width="1280px" height="50px" childLayout="center">
        <text font="Interface/Fonts/Default.fnt" text="Press ESC to pause" color="#aaaaaaff" textSize="14"/>
      </panel>
    </layer>
  </screen>

  <!-- ============================================== -->
  <!-- Pause Menu Screen (Tabbed Interface) -->
  <!-- ============================================== -->
  <screen id="pauseMenu" controller="com.flipsandale.game.PauseMenuScreenController">
    <layer id="background" backgroundColor="#00000099" childLayout="center" width="100%" height="100%">
      <!-- Pause Menu Modal Container -->
      <panel id="pauseMenuContainer" childLayout="vertical" padding="20,20,20,20" width="700px" height="600px" backgroundColor="#1a1a2eff" valignCenter="true">
        
        <!-- Title Bar -->
        <panel id="titleBar" childLayout="center" height="60px" backgroundColor="#0066ccff">
          <text font="Interface/Fonts/Default.fnt" text="PAUSED" align="center" valignCenter="center" color="#ffffffff" textSize="40"/>
        </panel>

        <!-- Tab Navigation Buttons -->
        <panel id="tabButtons" childLayout="horizontal" height="50px" padding="10,5,10,5">
          <control name="button" id="btnTabMain" label="Main" align="center" valignCenter="center" height="40px" width="150px">
            <interact onClick="switchToMainTab()"/>
          </control>
          <panel width="10px" childLayout="vertical"/>
          <control name="button" id="btnTabGraphics" label="Graphics" align="center" valignCenter="center" height="40px" width="150px">
            <interact onClick="switchToGraphicsTab()"/>
          </control>
          <panel width="10px" childLayout="vertical"/>
          <control name="button" id="btnTabAbout" label="About" align="center" valignCenter="center" height="40px" width="150px">
            <interact onClick="switchToAboutTab()"/>
          </control>
          <panel width="100%" childLayout="vertical"/>
        </panel>

        <!-- Separator -->
        <panel id="separator" height="2px" backgroundColor="#0066ccff" childLayout="vertical"/>

        <!-- Tab Content Area -->
        <panel id="tabContentArea" childLayout="vertical" padding="15,15,15,15" width="100%" height="450px">

          <!-- Main Tab Content -->
          <panel id="mainTabContent" childLayout="vertical" visible="true" width="100%" height="100%">
            <text font="Interface/Fonts/Default.fnt" text="Navigation & Actions" color="#ffd700ff" textSize="18"/>
            <panel height="8px" childLayout="vertical"/>
            
            <control name="button" id="btnResume" label="Resume Game" align="center" height="40px" width="250px">
              <interact onClick="resumeGame()"/>
            </control>
            <panel height="10px" childLayout="vertical"/>
            
            <control name="button" id="btnRestart" label="Restart Level" align="center" height="40px" width="250px">
              <interact onClick="restartLevel()"/>
            </control>
            <panel height="10px" childLayout="vertical"/>
            
            <control name="button" id="btnMenu" label="Return to Main Menu" align="center" height="40px" width="250px">
              <interact onClick="returnToMainMenu()"/>
            </control>
            <panel height="20px" childLayout="vertical"/>

            <text font="Interface/Fonts/Default.fnt" text="Controls Reference" color="#ffd700ff" textSize="16"/>
            <panel height="8px" childLayout="vertical"/>
            
            <text font="Interface/Fonts/Default.fnt" text="W/A/S/D - Move | Space - Jump | Tab - Fly" color="#ffffffff" textSize="12"/>
            <text font="Interface/Fonts/Default.fnt" text="Mouse Look - Right Mouse Button" color="#ffffffff" textSize="12"/>
            <text font="Interface/Fonts/Default.fnt" text="ESC - Pause/Resume Game" color="#ffffffff" textSize="12"/>
          </panel>

          <!-- Graphics Tab Content -->
          <panel id="graphicsTabContent" childLayout="vertical" visible="false" width="100%" height="100%">
            <text font="Interface/Fonts/Default.fnt" text="Audio Settings" color="#ffd700ff" textSize="18"/>
            <panel height="8px" childLayout="vertical"/>
            
            <text font="Interface/Fonts/Default.fnt" text="Master Volume" color="#ffffffff" textSize="14"/>
            <control name="horizontalSlider" id="masterVolumeSlider" width="100%" height="20px" value="100">
              <interact onClick="onMasterVolumeChanged()"/>
            </control>
            <panel height="10px" childLayout="vertical"/>

            <text font="Interface/Fonts/Default.fnt" text="SFX Volume" color="#ffffffff" textSize="14"/>
            <control name="horizontalSlider" id="sfxVolumeSlider" width="100%" height="20px" value="90">
              <interact onClick="onSfxVolumeChanged()"/>
            </control>
            <panel height="10px" childLayout="vertical"/>

            <text font="Interface/Fonts/Default.fnt" text="Field of View (FOV)" color="#ffffffff" textSize="14"/>
            <control name="horizontalSlider" id="fovSlider" width="100%" height="20px" value="75">
              <interact onClick="onFovChanged()"/>
            </control>
            <panel height="15px" childLayout="vertical"/>

            <text font="Interface/Fonts/Default.fnt" text="Display Options" color="#ffd700ff" textSize="16"/>
            <panel height="8px" childLayout="vertical"/>
            
            <control name="checkbox" id="chkShowStats" label="Show FPS Overlay" align="left">
              <interact onClick="onShowStatsToggled()"/>
            </control>
            <panel height="5px" childLayout="vertical"/>
            
            <control name="checkbox" id="chkInvertMouse" label="Invert Mouse Y-Axis" align="left">
              <interact onClick="onInvertMouseToggled()"/>
            </control>
          </panel>

          <!-- About Tab Content -->
          <panel id="aboutTabContent" childLayout="vertical" visible="false" width="100%" height="100%">
            <text font="Interface/Fonts/Default.fnt" text="Game Statistics" color="#ffd700ff" textSize="18"/>
            <panel height="8px" childLayout="vertical"/>
            
            <text id="aboutCurrentMode" font="Interface/Fonts/Default.fnt" text="Current Mode: Zen" color="#ffffffff" textSize="14"/>
            <text id="aboutCurrentLevel" font="Interface/Fonts/Default.fnt" text="Current Level: 1" color="#ffffffff" textSize="14"/>
            <text id="aboutPlatformsCleared" font="Interface/Fonts/Default.fnt" text="Platforms Cleared: 0" color="#ffffffff" textSize="14"/>
            <text id="aboutFallCount" font="Interface/Fonts/Default.fnt" text="Falls: 0" color="#ffffffff" textSize="14"/>
            <panel height="15px" childLayout="vertical"/>

            <text font="Interface/Fonts/Default.fnt" text="About Breaking Walls" color="#ffd700ff" textSize="16"/>
            <panel height="8px" childLayout="vertical"/>
            
            <text font="Interface/Fonts/Default.fnt" text="A challenging 3D maze platformer" color="#ffffffff" textSize="12"/>
            <text font="Interface/Fonts/Default.fnt" text="with two unique game modes." color="#ffffffff" textSize="12"/>
            <panel height="10px" childLayout="vertical"/>
            
            <text font="Interface/Fonts/Default.fnt" text="Version 1.0" color="#aaaaaa88" textSize="12"/>
            <text font="Interface/Fonts/Default.fnt" text="Built with jMonkeyEngine 3" color="#aaaaaa88" textSize="12"/>
          </panel>

        </panel>

        <!-- Footer with Quit Button -->
        <panel id="footer" childLayout="horizontal" height="50px" padding="10,10,10,10">
          <panel width="100%" childLayout="vertical"/>
          <control name="button" id="btnQuit" label="Quit to Desktop" align="center" valignCenter="center" height="40px" width="180px" backgroundColor="#cc3333ff">
            <interact onClick="quitGame()"/>
          </control>
        </panel>

      </panel>
    </layer>
  </screen>

  <!-- ============================================== -->
  <!-- Game Over Screen -->
  <!-- ============================================== -->
  <screen id="gameOverScreen" controller="com.flipsandale.game.GameOverScreenController">
    <layer id="background" backgroundColor="#000000ff" childLayout="vertical">
      <panel id="title" childLayout="center" alignRight="center" valignCenter="center" height="100px">
        <text font="Interface/Fonts/Default.fnt" text="GAME OVER" align="center" valignCenter="center" color="#ff6666ff" textSize="48"/>
      </panel>
      
      <panel id="stats" childLayout="vertical" padding="50,50,50,50" alignRight="center" valignCenter="center" width="400px" backgroundColor="#1a1a2eff">
        <text id="scoreText" font="Interface/Fonts/Default.fnt" text="Score: 0" color="#ffffffff" textSize="24" align="center"/>
        <text id="timeText" font="Interface/Fonts/Default.fnt" text="Time: 0.0s" color="#ffffffff" textSize="24" align="center"/>
        <text id="levelText" font="Interface/Fonts/Default.fnt" text="Level Reached: 1" color="#ffffffff" textSize="24" align="center"/>
        <text id="platformsText" font="Interface/Fonts/Default.fnt" text="Platforms: 0" color="#ffffffff" textSize="24" align="center"/>
        <text id="fallsText" font="Interface/Fonts/Default.fnt" text="Falls: 0" color="#ffffffff" textSize="24" align="center"/>
      </panel>

      <panel id="buttons" childLayout="vertical" padding="50,50,50,50" alignRight="center" valignCenter="center">
        <control name="button" id="btnPlayAgain" label="Play Again (Same Mode)" align="center" height="50px" width="300px">
          <interact onClick="playAgainSameMode()"/>
        </control>
        <panel height="20px" childLayout="vertical"/>
        <control name="button" id="btnChangeMode" label="Select Different Mode" align="center" height="50px" width="300px">
          <interact onClick="selectDifferentMode()"/>
        </control>
        <panel height="20px" childLayout="vertical"/>
        <control name="button" id="btnMenu" label="Main Menu" align="center" height="50px" width="300px">
          <interact onClick="returnToMainMenu()"/>
        </control>
        <panel height="20px" childLayout="vertical"/>
        <control name="button" id="btnQuit" label="Quit" align="center" height="50px" width="300px">
          <interact onClick="quitGame()"/>
        </control>
      </panel>
    </layer>
  </screen>

  <!-- ============================================== -->
  <!-- Options Menu Screen -->
  <!-- ============================================== -->
  <screen id="optionsMenu" controller="com.flipsandale.game.OptionsScreenController">
    <layer id="background" backgroundColor="#00000099" childLayout="center" width="100%" height="100%">
      <panel id="optionsMenuContainer" childLayout="vertical" padding="20,20,20,20" width="700px" height="600px" backgroundColor="#1a1a2eff" valignCenter="true">
        
        <!-- Title Bar -->
        <panel id="titleBar" childLayout="center" height="60px" backgroundColor="#0066ccff">
          <text font="Interface/Fonts/Default.fnt" text="OPTIONS" align="center" valignCenter="center" color="#ffffffff" textSize="40"/>
        </panel>

        <!-- Separator -->
        <panel id="separator1" height="2px" backgroundColor="#0066ccff" childLayout="vertical" marginBottom="15px"/>

        <!-- Audio Settings Section -->
        <text font="Interface/Fonts/Default.fnt" text="AUDIO SETTINGS" color="#0088ffff" textSize="16"/>
        
        <panel id="audioSettings" childLayout="vertical" marginBottom="20px">
          <control name="button" id="masterVolumeBtn" label="Master Volume" align="center" height="30px" width="200px" marginBottom="5px">
            <interact onClick="setMasterVolume(0.5)"/>
          </control>
          <control name="button" id="musicVolumeBtn" label="Music Volume" align="center" height="30px" width="200px" marginBottom="5px">
            <interact onClick="setMusicVolume(0.5)"/>
          </control>
          <control name="button" id="sfxVolumeBtn" label="SFX Volume" align="center" height="30px" width="200px">
            <interact onClick="setSfxVolume(0.5)"/>
          </control>
        </panel>

        <!-- Separator -->
        <panel id="separator2" height="1px" backgroundColor="#444444ff" childLayout="vertical" marginBottom="15px"/>

        <!-- Graphics Settings Section -->
        <text font="Interface/Fonts/Default.fnt" text="GRAPHICS SETTINGS" color="#0088ffff" textSize="16"/>
        
        <panel id="graphicsSettings" childLayout="vertical" marginBottom="20px">
          <control name="button" id="vSyncBtn" label="Toggle VSync" align="center" height="30px" width="200px" marginBottom="5px">
            <interact onClick="toggleVSync()"/>
          </control>
          <control name="button" id="fullscreenBtn" label="Toggle Fullscreen" align="center" height="30px" width="200px">
            <interact onClick="toggleFullscreen()"/>
          </control>
        </panel>

        <!-- Spacer -->
        <panel id="spacerContent" width="100%" height="80px" childLayout="vertical"/>

        <!-- Back button -->
        <control name="button" id="btnBackMain" label="Back" align="center" height="40px" width="200px">
          <interact onClick="backToMainMenu()"/>
        </control>
      </panel>
    </layer>
  </screen>

  <!-- ============================================== -->
  <!-- Help Screen -->
  <!-- ============================================== -->
  <screen id="helpScreen" controller="com.flipsandale.game.HelpScreenController">
    <layer id="background" backgroundColor="#00000099" childLayout="center" width="100%" height="100%">
      <panel id="helpContainer" childLayout="vertical" padding="20,20,20,20" width="800px" height="650px" backgroundColor="#1a1a2eff" valignCenter="true">
        
        <!-- Title Bar -->
        <panel id="titleBar" childLayout="center" height="60px" backgroundColor="#0066ccff">
          <text font="Interface/Fonts/Default.fnt" text="HELP & CONTROLS" align="center" valignCenter="center" color="#ffffffff" textSize="40"/>
        </panel>

        <!-- Separator -->
        <panel id="separator" height="2px" backgroundColor="#0066ccff" childLayout="vertical" marginBottom="15px"/>

        <!-- Content Panel -->
        <panel id="contentPanel" childLayout="vertical" width="100%" height="450px" paddingLeft="10px" paddingRight="10px">
          
          <!-- Objective section -->
          <text font="Interface/Fonts/Default.fnt" text="OBJECTIVE" color="#0088ffff" textSize="14"/>
          <text font="Interface/Fonts/Default.fnt" text="Navigate through a procedurally generated maze. Reach the exit to complete each level. Be careful not to fall!" color="#ccccccff" textSize="12" wrap="true" marginBottom="15px"/>

          <!-- Controls section -->
          <text font="Interface/Fonts/Default.fnt" text="CONTROLS" color="#0088ffff" textSize="14"/>
          <text font="Interface/Fonts/Default.fnt" text="W / A / S / D - Move | Mouse - Look | P - Toggle 3D View | ESC - Menu" color="#ccccccff" textSize="12" marginBottom="15px"/>

          <!-- Game Modes section -->
          <text font="Interface/Fonts/Default.fnt" text="GAME MODES" color="#0088ffff" textSize="14"/>
          <text font="Interface/Fonts/Default.fnt" text="ZEN MODE - Explore at your own pace. No time limit." color="#ccccccff" textSize="12" marginBottom="3px"/>
          <text font="Interface/Fonts/Default.fnt" text="TIME-TRIAL MODE - Race against the clock to complete each level." color="#ccccccff" textSize="12" marginBottom="15px"/>

          <!-- Tips section -->
          <text font="Interface/Fonts/Default.fnt" text="TIPS" color="#0088ffff" textSize="14"/>
          <text font="Interface/Fonts/Default.fnt" text="- Use third-person view to better navigate and plan your path" color="#ccccccff" textSize="12" marginBottom="3px"/>
          <text font="Interface/Fonts/Default.fnt" text="- Take your time in Zen Mode to understand the maze" color="#ccccccff" textSize="12"/>
        </panel>

        <!-- Back button -->
        <control name="button" id="btnBackHelp" label="Back" align="center" height="40px" width="200px" marginTop="20px">
          <interact onClick="backToMainMenu()"/>
        </control>
      </panel>
    </layer>
  </screen>

</nifty>
